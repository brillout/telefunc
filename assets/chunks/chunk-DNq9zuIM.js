import{a as c,u as j,m as h,j as o,o as m,R as k,v as p,p as u}from"./chunk-DJirElMN.js";function L(n){n=n.toLowerCase(),n=T(n);const t=n.split(/[^a-z0-9\u4E00-\u9FA5]+/).filter(Boolean).join("-");return t===""?null:t}function T(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function P(n){return c(n.includes("#"),{urlWithHash:n}),n.split("#")[1].split("-").map((s,i)=>i===0?F(s):s).join(" ")}function F(n){return n[0].toUpperCase()+n.slice(1)}function $({href:n,text:t,noBreadcrumb:e,doNotInferSectionTitle:s,noWarning:i,children:r}){const a=j();h(n.startsWith("/")||n.startsWith("#"),`<Link href /> prop \`href==='${n}'\` but should start with '/' or '#'`),h(!t||!r,"Cannot use both `text` or `children`"),t=t??r;const l=b({href:n,pageContext:a,doNotInferSectionTitle:s,noWarning:i});return t||(l?t=D({noBreadcrumb:e,...l}):t="LINK-TARGET-NOT-FOUND"),o.jsx("a",{href:n,children:t})}function D({noBreadcrumb:n,linkData:t,sectionTitle:e,isLinkOnSamePage:s}){const i=[];return t.linkBreadcrumb&&i.push(...(t.linkBreadcrumb??[]).slice().reverse().map(m)),i.push(m(t.title)),e&&i.push(e),n||s?i[i.length-1]:o.jsx(o.Fragment,{children:i.map((r,a)=>{const l=a===0?o.jsx(o.Fragment,{}):" > ";return o.jsxs(k.Fragment,{children:[l,r]},a)})})}function b({href:n,pageContext:t,doNotInferSectionTitle:e,noWarning:s}){const{hrefPathname:i,hrefHash:r}=x(n),a=g(i||t.urlPathname,{pageContext:t,noWarning:s});if(!a)return null;const l=a.url===t.urlPathname;i||c(l);let f=null;if(r){if(c(!r.startsWith("#")),l){const d=g(`#${r}`,{pageContext:t,noWarning:s});if(!d)return null;f=m(d.title)}else"sectionTitles"in a&&a.sectionTitles&&a.sectionTitles.forEach(d=>{L(d)===r&&(f=m(d))});if(!f){if(e)return p(!1,`Page section title not found for <Link href="\`${n}\`" doNotInferSectionTitle={true} />.`),null;f=o.jsx(o.Fragment,{children:P(n)})}}return{linkData:a,sectionTitle:f,isLinkOnSamePage:l}}function g(n,{pageContext:t,noWarning:e}){c(n.startsWith("/")||n.startsWith("#"));const{linksAll:s}=t.resolved,i=s.find(({url:r})=>n===r);return n.startsWith("#")?e||p(i,`Couldn't find ${n} in ${t.urlPathname}, does it exist?`):e||p(i,[`Couldn't find page with URL ${u.bold(n)}`,"â€” did you define it in",[u.cyan("docpress.config.js"),u.dim("#{"),u.cyan("headings"),u.dim(","),u.cyan("headingsDetached"),u.dim("}"),"?"].join("")].join(" ")),i??null}function x(n){let t=null,e=null;if(!n.includes("#"))e=n;else{const[s,...i]=n.split("#");s&&(e=s),t=i.join("#")}return c(e!==null||t!==null),c(e||t),t&&(t=t.split(":~:text")[0]),{hrefPathname:e,hrefHash:t}}export{$ as L};
