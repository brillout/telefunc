import{a as c,u as j,m as h,j as o,o as m,R as k,t as p,p as u}from"./chunk-DRRrHF0e.js";function L(t){t=t.toLowerCase(),t=T(t);const n=t.split(/[^a-z0-9\u4E00-\u9FA5]+/).filter(Boolean).join("-");return n===""?null:n}function T(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function P(t){return c(t.includes("#"),{urlWithHash:t}),t.split("#")[1].split("-").map((s,i)=>i===0?F(s):s).join(" ")}function F(t){return t[0].toUpperCase()+t.slice(1)}function $({href:t,text:n,noBreadcrumb:e,doNotInferSectionTitle:s,noWarning:i,children:r}){const a=j();h(t.startsWith("/")||t.startsWith("#"),`<Link href /> prop \`href==='${t}'\` but should start with '/' or '#'`),h(!n||!r,"Cannot use both `text` or `children`"),n=n??r;const l=b({href:t,pageContext:a,doNotInferSectionTitle:s,noWarning:i});return n||(l?n=D({noBreadcrumb:e,...l}):n="LINK-TARGET-NOT-FOUND"),o.jsx("a",{href:t,children:n})}function D({noBreadcrumb:t,linkData:n,sectionTitle:e,isLinkOnSamePage:s}){const i=[];return n.linkBreadcrumb&&i.push(...(n.linkBreadcrumb??[]).slice().reverse().map(m)),i.push(m(n.title)),e&&i.push(e),t||s?i[i.length-1]:o.jsx(o.Fragment,{children:i.map((r,a)=>{const l=a===0?o.jsx(o.Fragment,{}):" > ";return o.jsxs(k.Fragment,{children:[l,r]},a)})})}function b({href:t,pageContext:n,doNotInferSectionTitle:e,noWarning:s}){const{hrefPathname:i,hrefHash:r}=x(t),a=g(i||n.urlPathname,{pageContext:n,noWarning:s});if(!a)return null;const l=a.url===n.urlPathname;i||c(l);let f=null;if(r){if(c(!r.startsWith("#")),l){const d=g(`#${r}`,{pageContext:n,noWarning:s});if(!d)return null;f=m(d.title)}else"sectionTitles"in a&&a.sectionTitles&&a.sectionTitles.forEach(d=>{L(d)===r&&(f=m(d))});if(!f){if(e)return p(!1,`Page section title not found for <Link href="\`${t}\`" doNotInferSectionTitle={true} />.`),null;f=o.jsx(o.Fragment,{children:P(t)})}}return{linkData:a,sectionTitle:f,isLinkOnSamePage:l}}function g(t,{pageContext:n,noWarning:e}){c(t.startsWith("/")||t.startsWith("#"));const{linksAll:s}=n.resolved,i=s.find(({url:r})=>t===r);return t.startsWith("#")?e||p(i,`Couldn't find ${t} in ${n.urlPathname}, does it exist?`):e||p(i,[`Couldn't find page with URL ${u.bold(t)}`,"â€” did you define it in",[u.cyan("docpress.config.js"),u.dim("#{"),u.cyan("headings"),u.dim(","),u.cyan("headingsDetached"),u.dim("}"),"?"].join("")].join(" ")),i??null}function x(t){let n=null,e=null;if(!t.includes("#"))e=t;else{const[s,...i]=t.split("#");s&&(e=s),n=i.join("#")}return c(e!==null||n!==null),c(e||n),n&&(n=n.split(":~:text")[0]),{hrefPathname:e,hrefHash:n}}export{$ as L};
