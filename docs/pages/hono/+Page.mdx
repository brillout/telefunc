import { Link } from '@brillout/docpress'

Using Telefunc with [Hono](https://hono.dev/), [Express](https://expressjs.com/), [Fastify](https://fastify.dev/), or any Node.js/edge server.

## 1. Install

```bash
npm install telefunc
```

## 2. Vite plugin

```ts
// vite.config.ts

import { telefunc } from 'telefunc/vite'
import { defineConfig } from 'vite'

export default defineConfig({
  plugins: [telefunc()]
})
```

## 3. Server middleware

```ts
// server.ts
// Environment: server

import { Hono } from 'hono'
import { telefunc } from 'telefunc'

const app = new Hono()

app.all('/_telefunc', async (c) => {
  const httpResponse = await telefunc({ request: c.req.raw })
  return new Response(httpResponse.body, {
    status: httpResponse.statusCode,
    headers: { 'content-type': httpResponse.contentType },
  })
})
```

With Express/Fastify (Node.js `Readable` stream):

```ts
// Environment: server

import express from 'express'
import { telefunc } from 'telefunc'

const app = express()

app.all('/_telefunc', async (req, res) => {
  const httpResponse = await telefunc({
    url: req.originalUrl,
    method: req.method,
    readable: req,
    contentType: req.headers['content-type'] || '',
  })
  res.status(httpResponse.statusCode).type(httpResponse.contentType).send(httpResponse.body)
})
```

## 4. Create a telefunction

```ts
// hello.telefunc.ts
// Environment: server

export async function onHello(name: string) {
  return { message: `Hello, ${name}!` }
}
```

## 5. Call it from the client

```ts
// hello.ts
// Environment: client

import { onHello } from './hello.telefunc'

const result = await onHello('World')
console.log(result.message) // 'Hello, World!'
```

That's it. Telefunc transforms the import into an HTTP call â€” the telefunction runs on the server.

> To pass contextual information (e.g. the logged-in user) to your telefunctions, see <Link href="/getContext" />.
